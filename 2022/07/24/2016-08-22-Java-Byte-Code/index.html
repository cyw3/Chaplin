<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Java字节码总结 - cyw3</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="cyw3"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="cyw3"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="目录 1. 概述  2. 举个栗子  3. Class文件结构  4. 指令  1)	字节码与数据类型  2)	加载和存储指令  3)	运算指令  4)	类型转换指令  5)	对象创建与访问指令  6)	操作数栈管理指令  7)	控制转移指令  8)	方法调用和返回指令  9)	异常处理指令  10)	同步指令  5. 再看几个栗子  例1  例2  例3   1. 概述学过Java的都知道，Ja"><meta property="og:type" content="blog"><meta property="og:title" content="Java字节码总结"><meta property="og:url" content="http://example.com/2022/07/24/2016-08-22-Java-Byte-Code/"><meta property="og:site_name" content="cyw3"><meta property="og:description" content="目录 1. 概述  2. 举个栗子  3. Class文件结构  4. 指令  1)	字节码与数据类型  2)	加载和存储指令  3)	运算指令  4)	类型转换指令  5)	对象创建与访问指令  6)	操作数栈管理指令  7)	控制转移指令  8)	方法调用和返回指令  9)	异常处理指令  10)	同步指令  5. 再看几个栗子  例1  例2  例3   1. 概述学过Java的都知道，Ja"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://example.com/img/javabytecode1.png"><meta property="og:image" content="http://example.com/img/javabytecode2.png"><meta property="og:image" content="http://example.com/img/javabytecode3.png"><meta property="og:image" content="http://example.com/img/javabytecode4.png"><meta property="og:image" content="http://example.com/img/javabytecode5.png"><meta property="og:image" content="http://example.com/img/javabytecode6.png"><meta property="og:image" content="http://example.com/img/javabytecode7.png"><meta property="og:image" content="http://example.com/img/javabytecode8.png"><meta property="og:image" content="http://example.com/img/javabytecode9.png"><meta property="og:image" content="http://example.com/img/javabytecode10.png"><meta property="article:published_time" content="2022-07-24T05:39:54.677Z"><meta property="article:modified_time" content="2022-07-24T05:39:54.677Z"><meta property="article:author" content="cyw3"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://example.com/img/javabytecode1.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com/2022/07/24/2016-08-22-Java-Byte-Code/"},"headline":"Java字节码总结","image":["http://example.com/img/javabytecode1.png","http://example.com/img/javabytecode2.png","http://example.com/img/javabytecode3.png","http://example.com/img/javabytecode4.png","http://example.com/img/javabytecode5.png","http://example.com/img/javabytecode6.png","http://example.com/img/javabytecode7.png","http://example.com/img/javabytecode8.png","http://example.com/img/javabytecode9.png","http://example.com/img/javabytecode10.png"],"datePublished":"2022-07-24T05:39:54.677Z","dateModified":"2022-07-24T05:39:54.677Z","author":{"@type":"Person","name":"yalechen"},"publisher":{"@type":"Organization","name":"cyw3","logo":{"@type":"ImageObject","url":{"text":"Cyw3"}}},"description":"目录 1. 概述  2. 举个栗子  3. Class文件结构  4. 指令  1)\t字节码与数据类型  2)\t加载和存储指令  3)\t运算指令  4)\t类型转换指令  5)\t对象创建与访问指令  6)\t操作数栈管理指令  7)\t控制转移指令  8)\t方法调用和返回指令  9)\t异常处理指令  10)\t同步指令  5. 再看几个栗子  例1  例2  例3   1. 概述学过Java的都知道，Ja"}</script><link rel="canonical" href="http://example.com/2022/07/24/2016-08-22-Java-Byte-Code/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }
          Array
              .from(document.querySelectorAll('.tab-content'))
              .forEach($tab => {
                  $tab.classList.add('is-hidden');
              });
          Array
              .from(document.querySelectorAll('.tabs li'))
              .forEach($tab => {
                  $tab.classList.remove('is-active');
              });
          const $activeTab = document.querySelector(location.hash);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
          const $tabMenu = document.querySelector(`a[href="${location.hash}"]`);
          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.2.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Cyw3</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/cyw3/cyw3.github.io"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-07-24T05:39:54.677Z" title="7/24/2022, 1:39:54 PM">2022-07-24</time>发表</span><span class="level-item"><time dateTime="2022-07-24T05:39:54.677Z" title="7/24/2022, 1:39:54 PM">2022-07-24</time>更新</span><span class="level-item"> yalechen </span><span class="level-item">1 小时读完 (大约9415个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">Java字节码总结</h1><div class="content"><h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul>
<li><p><a href="#1">1. 概述</a></p>
</li>
<li><p><a href="#2">2. 举个栗子</a></p>
</li>
<li><p><a href="#3">3. Class文件结构</a></p>
</li>
<li><p><a href="#4">4. 指令</a></p>
</li>
<li><p><a href="#4.1">1)	字节码与数据类型</a></p>
</li>
<li><p><a href="#4.2">2)	加载和存储指令</a></p>
</li>
<li><p><a href="#4.3">3)	运算指令</a></p>
</li>
<li><p><a href="#4.4">4)	类型转换指令</a></p>
</li>
<li><p><a href="#4.5">5)	对象创建与访问指令</a></p>
</li>
<li><p><a href="#4.6">6)	操作数栈管理指令</a></p>
</li>
<li><p><a href="#4.7">7)	控制转移指令</a></p>
</li>
<li><p><a href="#4.8">8)	方法调用和返回指令</a></p>
</li>
<li><p><a href="#4.9">9)	异常处理指令</a></p>
</li>
<li><p><a href="#4.10">10)	同步指令</a></p>
</li>
<li><p><a href="#5">5. 再看几个栗子</a></p>
</li>
<li><p><a href="#5.1">例1</a></p>
</li>
<li><p><a href="#5.2">例2</a></p>
</li>
<li><p><a href="#5.3">例3</a></p>
</li>
</ul>
<h2 id="1-概述"><a href="#1-概述" class="headerlink" title="1. 概述"></a><span id="1">1. 概述</span></h2><p>学过Java的都知道，Java从一开始就打着平台无关性的旗号，说“一次编写，到处运行”，其实说到无关性，Java平台还有另外一个无关性那就是语言无关性。实现语言无关性，那么Java体系中的class文件结构或者说是字节码就显得相当重要了，其实Java从刚开始的时候就有两套规范，一个是Java语言规范，另外一个是Java虚拟机规范，Java语言规范只是规定了Java语言相关的约束以及规则，而虚拟机规范则才是真正从跨平台的角度去设计的。</p>
<p>Java代码要想执行，需要先被编译成Class文件，即使Java字节码文件，然后才能够在JVM上执行。</p>
<p>那么现在我们简单的了解下Java字节码究竟是什么。这种类汇编的指令有是如何在JVM上面执行的呢？</p>
<p>在Class文件中，Java方法里的方法体，也就是代表着一个Java源码程序中程序的部分存储在方法表集合的Code属性中。存储在Code属性中的是字节码，也就是编译后的程序。Java虚拟机的指令由两部分组成，首先是一个字节长度、代表某种含义的数字（即操作码），在操作码后面跟着零个或多个代表这个操作所需的参数（即操作数）。由于Java虚拟机采用的是面向操作数栈而不是寄存器的架构，所以大多数指令不包含操作数，只有一个操作码。</p>
<p>操作码的长度只有一个字节，这就限制了操作码的个数不超过256个。同时，Class文件格式放弃了编译后代码的操作数长度对齐，这就意味着虚拟机处理那些超过一个字节的数据时，不得不在运行时从字节中重建出具体数据的结构。比如，如果要将一个两个字节长的无符号整数使用两个无符号字节存储起来分别是byte1和byte2，那么就需要这样构造出原始的无符号整数：</p>
<pre><code>(byte1&lt;&lt;8) | byte2
</code></pre>
<p>操作数的数量以及长度，取决于操作码，若一个操作数长度超过了一个字节，将会以Big-Endian顺序存储(高位在前字节码)。</p>
<p>这样会在某种程度上导致执行字节码时损失一些性能。但这样做也有好处，那就是由于不需要对齐，省去了中间的填充与间隔符号；用一个字节来表示操作码，也是为了获得短小的编译代码。这样就尽可能的减少了编译后的代码的长度，非常适合网络传输。</p>
<p>如果不考虑异常处理的话，那么Java虚拟机的解释器可以使用下面的伪代码作为基本的执行模型来理解：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">do</span>&#123;  </span><br><span class="line">    自动计算<span class="variable constant_">PC</span>寄存器的值加<span class="number">1</span>;  </span><br><span class="line">    根据<span class="variable constant_">PC</span>寄存器的指示位置，从字节码流中取出操作码;  </span><br><span class="line">    <span class="keyword">if</span>(字节码存在操作数) 从字节码流中取出操作数;  </span><br><span class="line">    执行操作码所定义的操作;  </span><br><span class="line">&#125;<span class="keyword">while</span>(字节码长度&gt;<span class="number">0</span>);  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="2-举个栗子"><a href="#2-举个栗子" class="headerlink" title="2. 举个栗子"></a><span id="2">2. 举个栗子</span></h2><p>可能大家现在有点不明觉厉哦，那么咱们先上代码，看看是个什么情况。</p>
<p>首先是一个简单的在控制台打印“Hello”的Java代码，如下：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public <span class="keyword">class</span> <span class="title class_">SimpleClass</span> &#123;</span><br><span class="line">    public void sayHello() &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>然后我们使用javac  SimpleClass.java命令，编译该Java代码，生成相应的Class文件。然后，继续在终端中使用javap -verbose SimpleClass，打印Class文件中的内容。如下：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Classfile /<span class="symbol">C:</span>/Users/yalechen/Desktop/<span class="variable constant_">JVM</span>/Java Byte Code/samples/SimpleClass.<span class="keyword">class</span></span><br><span class="line">  <span class="title class_">Last</span> modified <span class="number">2016</span>-<span class="number">8</span>-<span class="number">16</span>; size <span class="number">400</span> bytes</span><br><span class="line">  <span class="variable constant_">MD5</span> checksum 92d47034320261dac69592f3c3e33c2e</span><br><span class="line">  Compiled from <span class="string">&quot;SimpleClass.java&quot;</span></span><br><span class="line">public <span class="keyword">class</span> <span class="title class_">SimpleClass</span></span><br><span class="line">  minor <span class="symbol">version:</span> <span class="number">0</span></span><br><span class="line">  major <span class="symbol">version:</span> <span class="number">52</span></span><br><span class="line">  <span class="symbol">flags:</span> <span class="variable constant_">ACC_PUBLIC</span>, <span class="variable constant_">ACC_SUPER</span></span><br><span class="line">Constant <span class="symbol">pool:</span></span><br><span class="line">   <span class="comment">#1 = Methodref          #6.#14         // java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">   <span class="comment">#2 = Fieldref           #15.#16        // java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">   <span class="comment">#3 = String             #17            // Hello</span></span><br><span class="line">   <span class="comment">#4 = Methodref          #18.#19        // java/io/PrintStream.println:(Ljava/lang/String;)V</span></span><br><span class="line">   <span class="comment">#5 = Class              #20            // SimpleClass</span></span><br><span class="line">   <span class="comment">#6 = Class              #21            // java/lang/Object</span></span><br><span class="line">   <span class="comment">#7 = Utf8               &lt;init&gt;</span></span><br><span class="line">   <span class="comment">#8 = Utf8               ()V</span></span><br><span class="line">   <span class="comment">#9 = Utf8               Code</span></span><br><span class="line">  <span class="comment">#10 = Utf8               LineNumberTable</span></span><br><span class="line">  <span class="comment">#11 = Utf8               sayHello</span></span><br><span class="line">  <span class="comment">#12 = Utf8               SourceFile</span></span><br><span class="line">  <span class="comment">#13 = Utf8               SimpleClass.java</span></span><br><span class="line">  <span class="comment">#14 = NameAndType        #7:#8          // &quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">  <span class="comment">#15 = Class              #22            // java/lang/System</span></span><br><span class="line">  <span class="comment">#16 = NameAndType        #23:#24        // out:Ljava/io/PrintStream;</span></span><br><span class="line">  <span class="comment">#17 = Utf8               Hello</span></span><br><span class="line">  <span class="comment">#18 = Class              #25            // java/io/PrintStream</span></span><br><span class="line">  <span class="comment">#19 = NameAndType        #26:#27        // println:(Ljava/lang/String;)V</span></span><br><span class="line">  <span class="comment">#20 = Utf8               SimpleClass</span></span><br><span class="line">  <span class="comment">#21 = Utf8               java/lang/Object</span></span><br><span class="line">  <span class="comment">#22 = Utf8               java/lang/System</span></span><br><span class="line">  <span class="comment">#23 = Utf8               out</span></span><br><span class="line">  <span class="comment">#24 = Utf8               Ljava/io/PrintStream;</span></span><br><span class="line">  <span class="comment">#25 = Utf8               java/io/PrintStream</span></span><br><span class="line">  <span class="comment">#26 = Utf8               println</span></span><br><span class="line">  <span class="comment">#27 = Utf8               (Ljava/lang/String;)V</span></span><br><span class="line">&#123;</span><br><span class="line">  public SimpleClass();</span><br><span class="line">    <span class="symbol">descriptor:</span> ()V</span><br><span class="line">    <span class="symbol">flags:</span> <span class="variable constant_">ACC_PUBLIC</span></span><br><span class="line">    <span class="symbol">Code:</span></span><br><span class="line">      stack=<span class="number">1</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         <span class="number">1</span>: invokespecial <span class="comment">#1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">         <span class="number">4</span>: <span class="keyword">return</span></span><br><span class="line">      <span class="symbol">LineNumberTable:</span></span><br><span class="line">        line <span class="number">3</span>: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  public void sayHello();</span><br><span class="line">    <span class="symbol">descriptor:</span> ()V</span><br><span class="line">    <span class="symbol">flags:</span> <span class="variable constant_">ACC_PUBLIC</span></span><br><span class="line">    <span class="symbol">Code:</span></span><br><span class="line">      stack=<span class="number">2</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: getstatic     <span class="comment">#2                  // Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">         <span class="number">3</span>: ldc           <span class="comment">#3                  // String Hello</span></span><br><span class="line">         <span class="number">5</span>: invokevirtual <span class="comment">#4                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V</span></span><br><span class="line">         <span class="number">8</span>: <span class="keyword">return</span></span><br><span class="line">      <span class="symbol">LineNumberTable:</span></span><br><span class="line">        line <span class="number">6</span>: <span class="number">0</span></span><br><span class="line">        line <span class="number">7</span>: <span class="number">8</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="symbol">SourceFile:</span> <span class="string">&quot;SimpleClass.java&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>我们从上往下依次解析。</p>
<ol>
<li><pre><code>首先是该Class文件的整体信息介绍，包括文件所在路径、最近修改时间、文件大小、MD5校验值、从哪个Java编译而来。接下来才是正文。
</code></pre>
</li>
<li><pre><code>我们一步一步来：
</code></pre>
</li>
</ol>
<p>1）	该类的声明</p>
<p>2）	Minor version，表示Class文件的次版本号。Major version，表示Class文件的主版本号。major_version和minor_version主要用来表示当前的虚拟机是否接受当前这种版本的Class文件。不同版本的Java编译器编译的Class文件对应的版本是不一样的。高版本的虚拟机支持低版本的编译器编译的 Class文件结构。比如Java SE 6.0对应的虚拟机支持Java SE 5.0的编译器编译的Class文件结构，反之则不行。</p>
<p>3）	Flags，是该类的一些标识，包括访问权限（public、private、protected），父类、实现的接口等等。</p>
<p>4）	Constant pool，常量池。以下的一些都是定义的常量。这个算是Java代码编译上的一种优化，把一些引用明确的变量、方法、类等，转换成直接引用。</p>
<p>在能够唯一确定方法的直接引用的时候，虚拟机会将常量表里的符号引用转换为直接引用。但是如果方法是动态绑定的，也就是说在编译期我们并不知道使用哪个方法（或者叫不知道使用方法的哪个版本），那么这个时候就需要在运行时才能确定哪个版本的方法将被调用，这个时候才能将符号引用转换为直接引用。这个问题提到的多个版本的方法在java中的重载和多态重写问题息息相关。</p>
<p>具体的定义，比如：</p>
<pre><code>#1 = Methodref          #6.#14      // java/lang/Object.&quot;&lt;init&gt;&quot;:()V
</code></pre>
<p>#1是定义的引用的别称；</p>
<p>Methodref是该引用的具体类别，还有好几种不同的类别，之后会提及；</p>
<p>#6.#14是具体的引用名称，不过此时的引用名称也是有下面定义的引用别称来表示的。后面的双斜杠注释表示对引用的解释。</p>
<p>5）	花括号中的便是SimpleClasss类的内容了。其中是一个一个的方法定义。</p>
<p>6）	public SimpleClass();这个是构造方法的声明。简直就是Java代码有没有。</p>
<p>7）	descriptor: ()V描述。()V，看到括号里面没有参数，V便是Void，所以这是个无参无返回值的方法。</p>
<p>8）	flags的含义跟跟上面提及的一样。</p>
<p>9）	code属性，表示的是方法的具体内容。</p>
<p>10）stack、locals以及args_size，读入栈深度建立符合要求的操作数栈，读入局部变量大小建立符合要求的局部变量表，根据参数个数向局部变量表中依序加入参数（第一个参数是引用当前对象的this，所以空参数列表的参数数也是1）</p>
<p>11）LineNumberTable，是指每一个java字节码指令对应java代码文件中的第几行，以方便定位。</p>
<p>12）同理，sayHello方法也是如此道理。</p>
<p>13）SourceFile，这是源代码。</p>
<p>不知大家看懂了多少，先凑合着来，慢慢理清头绪。
 </p>
<h2 id="3-Class文件结构"><a href="#3-Class文件结构" class="headerlink" title="3. Class文件结构"></a><span id="3">3. Class文件结构</span></h2><p>首先需要明确如下几点：</p>
<p>1）Class文件是由8个字节为基础的字节流构成的，这些字节流之间都严格按照规定的顺序排列，并且字节之间不存在任何空隙，对于超过8个字节的数据，将按照Big-Endian的顺序存储的，也就是说高位字节存储在低的地址上面，而低位字节存储到高地址上面，其实这也是class文件要跨平台的关键，因为 PowerPC架构的处理采用Big-Endian的存储顺序，而x86系列的处理器则采用Little-Endian的存储顺序，因此为了Class文件在各中处理器架构下保持统一的存储顺序，虚拟机规范必须对起进行统一。</p>
<p>2） Class文件结构采用类似C语言的结构体来存储数据的，主要有两类数据项，无符号数和表，无符号数用来表述数字，索引引用以及字符串等，比如u1,u2,u4,u8分别代表1个字节，2个字节，4个字节，8个字节的无符号数，而表是有多个无符号数以及其它的表组成的复合结构。</p>
<p>明确了上面的两点以后，我们接下来后来看看Class文件中按照严格的顺序排列的字节流都具体包含些什么数据：</p>
<p><img src="/img/javabytecode1.png" alt="javabytecode1.png"></p>
<p>在看上图的时候，有一点我们需要注意，比如cp_info，cp_info表示常量池，上图中用 constant_pool[constant_pool_count-1]的方式来表示常量池有constant_pool_count-1个常量，它这里是采用数组的表现形式，但是大家不要误以为所有的常量池的常量长度都是一样的，其实这个地方只是为了方便描述采用了数组的方式，但是这里并不像编程语言那里，一个int型的数组，每个int长度都一样。明确了这一点以后，我们在回过头来看看上图中每一项都具体代表了什么含义。</p>
<p>1）u4 magic 表示魔数，并且魔数占用了4个字节，魔数到底是做什么的呢？它其实就是表示一下这个文件的类型是一个Class文件，而不是一张JPG图片，或者AVI的电影。而Class文件对应的魔数是0xCAFEBABE.</p>
<p>2）u2 minor_version 表示Class文件的次版本号，并且此版本号是u2类型的无符号数表示。</p>
<p>3）u2 major_version 表示Class文件的主版本号，并且主版本号是u2类型的无符号数表示。major_version和minor_version主要用来表示当前的虚拟机是否接受当前这种版本的Class文件。不同版本的Java编译器编译的Class文件对应的版本是不一样的。高版本的虚拟机支持低版本的编译器编译的 Class文件结构。比如Java SE 6.0对应的虚拟机支持Java SE 5.0的编译器编译的Class文件结构，反之则不行。</p>
<p>4）u2 constant_pool_count 表示常量池的数量。这里我们需要重点来说一下常量池是什么东西，请大家不要与Jvm内存模型中的运行时常量池混淆了，Class文件中常量池主要存储了字面量以及符号引用，其中字面量主要包括字符串，final常量的值或者某个属性的初始值等等，而符号引用主要存储类和接口的全限定名称，字段的名称以及描述符，方法的名称以及描述符，这里名称可能大家都容易理解，至于描述符的概念，放到下面说字段表以及方法表的时候再说。另外大家都知道Jvm的内存模型中有堆，栈，方法区，程序计数器构成，而方法区中又存在一块区域叫运行时常量池，运行时常量池中存放的东西其实也就是编译器长生的各种字面量以及符号引用，只不过运行时常量池具有动态性，它可以在运行的时候向其中增加其它的常量进去，最具代表性的就是String的intern方法。</p>
<p>5）cp_info 表示常量池，这里面就存在了上面说的各种各样的字面量和符号引用。放到常量池的中数据项在The Java Virtual Machine Specification Java SE 7 Edition 中一共有14个常量，每一种常量都是一个表，并且每种常量都用一个公共的部分tag来表示是哪种类型的常量。</p>
<p>下面分别简单描述一下具体细节等到后面的实例中我们再细化。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">CONSTANT_Utf8_info      tag标志位为<span class="number">1</span>,   <span class="variable constant_">UTF</span>-<span class="number">8</span>编码的字符串</span><br><span class="line"></span><br><span class="line">CONSTANT_Integer_info  tag标志位为<span class="number">3</span>，整形字面量</span><br><span class="line"></span><br><span class="line">CONSTANT_Float_info     tag标志位为<span class="number">4</span>，浮点型字面量</span><br><span class="line"></span><br><span class="line">CONSTANT_Long_info     tag标志位为<span class="number">5</span>，长整形字面量</span><br><span class="line"></span><br><span class="line">CONSTANT_Double_info  tag标志位为<span class="number">6</span>，双精度字面量</span><br><span class="line"></span><br><span class="line">CONSTANT_Class_info    tag标志位为<span class="number">7</span>，类或接口的符号引用</span><br><span class="line"></span><br><span class="line">CONSTANT_String_info    tag标志位为<span class="number">8</span>，字符串类型的字面量</span><br><span class="line"></span><br><span class="line">CONSTANT_Fieldref_info  tag标志位为<span class="number">9</span>,  字段的符号引用</span><br><span class="line"></span><br><span class="line">CONSTANT_Methodref_info  tag标志位为<span class="number">10</span>，类中方法的符号引用</span><br><span class="line"></span><br><span class="line">CONSTANT_InterfaceMethodref_info tag标志位为<span class="number">11</span>, 接口中方法的符号引用</span><br><span class="line"></span><br><span class="line">CONSTANT_NameAndType_info tag 标志位为<span class="number">12</span>，字段和方法的名称以及类型的符号引用</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>可参考下图。</p>
<p><img src="/img/javabytecode2.png" alt="javabytecode2.png"></p>
<p>而这是在Java字节码中常出现的各种常量类型的字符描述符：</p>
<p><img src="/img/javabytecode3.png" alt="javabytecode3.png"></p>
<p>6）u2 access_flags 表示类或者接口的访问信息，具体如下图所示：</p>
<p><img src="/img/javabytecode4.png" alt="javabytecode4.png"></p>
<p>7）u2 this_class 表示类的常量池索引，指向常量池中CONSTANT_Class_info的常量</p>
<p>8）u2 super_class 表示超类的索引，指向常量池中CONSTANT_Class_info的常量</p>
<p>9）u2 interface_counts 表示接口的数量</p>
<p>10）u2 interface[interface_counts]表示接口表，它里面每一项都指向常量池中CONSTANT_Class_info常量</p>
<p>11）u2 fields_count 表示类的实例变量和类变量的数量</p>
<p>12）field_info fields[fields_count]表示字段表的信息，其中字段表的结构如下图所示：</p>
<p><img src="/img/javabytecode5.png" alt="javabytecode5.png"></p>
<p>上图中access_flags表示字段的访问表示，比如字段是public,private，protect 等，name_index表示字段名称，指向常量池中类型是CONSTANT_UTF8_info的常量，descriptor_index表示字段的描述符，它也指向常量池中类型为 CONSTANT_UTF8_info的常量，attributes_count表示字段表中的属性表的数量，而属性表是则是一种用与描述字段，方法以及类的属性的可扩展的结构，不同版本的Java虚拟机所支持的属性表的数量是不同的。</p>
<p><img src="/img/javabytecode6.png" alt="javabytecode6.png"></p>
<p>13）u2 methods_count表示方法表的数量</p>
<p>14）method_info 表示方法表，方法表的具体结构如下图所示：</p>
<p><img src="/img/javabytecode7.png" alt="javabytecode7.png"></p>
<p>其中access_flags表示方法的访问表示，name_index表示名称的索引，descriptor_index表示方法的描述符，attributes_count以及attribute_info类似字段表中的属性表，只不过字段表和方法表中属性表中的属性是不同的，比如方法表中就Code属性，表示方法的代码，而字段表中就没有Code属性。Code属性的结构如下图：</p>
<p><img src="/img/javabytecode8.png" alt="javabytecode8.png"></p>
<p>attribute_name_index指向常量池中值为Code的常量；</p>
<p>attribute_length表示Code属性表的长度（这里需要注意的时候长度不包括attribute_name_index和attribute_length的6个字节的长度）；</p>
<p>max_stack表示最大栈深度，虚拟机在运行时根据这个值来分配栈帧中操作数的深度，而max_locals代表了局部变量表的存储空间；</p>
<p>max_locals的单位为slot，slot是虚拟机为局部变量分配内存的最小单元，在运行时，对于不超过32位类型的数据类型，比如 byte,char,int等占用1个slot，而double和Long这种64位的数据类型则需要分配2个slot，另外max_locals的值并不是所有局部变量所需要的内存数量之和，因为slot是可以重用的，当局部变量超过了它的作用域以后，局部变量所占用的slot就会被重用；</p>
<p>code_length代表了字节码指令的数量，而code表示的时候字节码指令，从上图可以知道code的类型为u1,一个u1类型的取值为0x00-0xFF,对应的十进制为0-255，目前虚拟机规范已经定义了200多条指令；</p>
<p>exception_table_length以及exception_table分别代表方法对应的异常信息；</p>
<p>attributes_count和attribute_info分别表示了Code属性中的属性数量和属性表，从这里可以看出Class的文件结构中，属性表是很灵活的，它可以存在于Class文件，方法表，字段表以及Code属性中。</p>
<p>15） attribute_count表示属性表的数量，说到属性表，我们需要明确以下几点：</p>
<ul>
<li><p>属性表存在于Class文件结构的最后，字段表，方法表以及Code属性中，也就是说属性表中也可以存在属性表</p>
</li>
<li><p>属性表的长度是不固定的，不同的属性，属性表的长度是不同的</p>
</li>
</ul>
<p>16）LineNumberTable，用于描述java源代码的行号和字节码行号的对应关系，它不是运行时必需的属性，如果通过-g:none的编译器参数来取消生成这项信息的话，最大的影响就是异常发生的时候，堆栈中不能显示出出错的行号，调试的时候也不能按照源代码来设置断点，接下来我们再看一下LineNumberTable的结构如下图所示：</p>
<p><img src="/img/javabytecode9.png" alt="javabytecode9.png"></p>
<p>其中attribute_name_index表示常量池的索引，attribute_length表示属性长度，而start_pc和 line_number分表表示字节码的行号和源代码的行号。</p>
<p>17）SourceFile，SourceFile的结构如下图所示：</p>
<p><img src="/img/javabytecode10.png" alt="javabytecode10.png"></p>
<p>其中attribute_length为属性的长度，sourcefile_index指向常量池中值为源代码文件名称的常量。</p>
<h2 id="4-指令"><a href="#4-指令" class="headerlink" title="4. 指令"></a><span id="4">4. 指令</span></h2><p>以下是具体使用到的Java字节码指令集。</p>
<h3 id="1-字节码与数据类型"><a href="#1-字节码与数据类型" class="headerlink" title="1)	字节码与数据类型"></a><span id="4.1">1)	字节码与数据类型</span></h3><p>在Java虚拟机的指令集中，大多数的指令都包含了操作所对应的数据类型信息。比如iload指令表示从局部变量表中加载int型数据到操作数栈中，而fload表示加载float类型的数据。不过，这两条指令再虚拟机的内部可能是由同一段代码来实现的，但在class文件中必须有自己的操作码。</p>
<p>我们已经知道Java指令的长度只有一个字节，这就限制了指令集的大小。如果每个指令都像上面两个指令那样包含所有的数据类型，那么就有可能导致指令过多。因此，Java虚拟机的指令集对于特定的操作只提供了有限的类型相关指令去支持它。比如，大多数指令没有支持整数类型byte、char和short，甚至没有指令支持boolean类型。</p>
<p>这些指令中都有特殊的字符来表示专门支持的类型：i代表int类型，l代表long，s代表short，b代表byte，c代表char，f代表float，d代表double，a代表Reference。</p>
<p>这里仅仅介绍一下指令的种类以及作用，并不会过多的介绍各个指令的含义以及使用，需要的话可以查看《Java虚拟机规范（Java SE 7版）》。</p>
<h3 id="2-加载和存储指令"><a href="#2-加载和存储指令" class="headerlink" title="2)	加载和存储指令"></a><span id="4.2">2)	加载和存储指令</span></h3><p>加载指令用于将局部变量表中的数据传送到操作数栈中，而存储指令用于将操作数栈中的结果传送到局部变量表中。这类指令包括如下几种：</p>
<p>将一个局部变量加载到操作栈，比如iload、iload<n>、fload、fload<n>、lload、lload<n>、dload、dload<n>、aload、aload<n>；</p>
<p>将一个数值从操作数栈存储到局部变量表，比如istore、istore<n>、lstore、lstore<n>、fstore、fstore<n>、dstore、dstore<n>、astore、astore<n>；</p>
<p>将一个常量加载到操作数栈，比如bipush、sipush、ldc、ldc_w、ldc2_w、aconst_null、iconst_ml、iconst_<i>、lconst_<l>、fconst_<f>、dconst_<d>；</p>
<p>扩充局部变量表的访问索引的指令：wide；</p>
<p>上面中带尖括号的指令实际是一组指令。比如iload<n>，代表了iload_1、iload_2和iload_3。这几组指令是某个带操作数的指令（比如iload）的特殊形式，它们省略了操作数，不过操作数隐含在指令中。</p>
<h3 id="3-运算指令"><a href="#3-运算指令" class="headerlink" title="3)	运算指令"></a><span id="4.3">3)	运算指令</span></h3><p>运算或算术指令用于对一个或两个操作数栈上的值进行某种特定的运算，并将结果存入栈顶。大体上可以分为两种，对整数进行运算的指令和对浮点数进行运算的指令。不过，由于没有支持byte、short、char和boolean的算术指令，对于这些数据的运算，会把它们转化为int类型进行运算。指令列出如下：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">加法指令：iadd、ladd、fadd、dadd；</span><br><span class="line"></span><br><span class="line">减法指令：isub、lsub、fsub、dsub；</span><br><span class="line"></span><br><span class="line">乘法指令：imul、lmul、fmul、dmul；</span><br><span class="line"></span><br><span class="line">除法指令：idiv、ldiv、fdiv、ddiv；</span><br><span class="line"></span><br><span class="line">求余指令：irem、lrem、frem、drem；</span><br><span class="line"></span><br><span class="line">取反指令：ineg、lneg、fneg、dneg；</span><br><span class="line"></span><br><span class="line">位移指令：ishl、ishr、iushr、lshl、lshr、lushr；</span><br><span class="line"></span><br><span class="line">按位或指令：ior、lor；</span><br><span class="line"></span><br><span class="line">按位与指令：iand、land；</span><br><span class="line"></span><br><span class="line">按位异或指令：ixor、lxor；</span><br><span class="line"></span><br><span class="line">局部变量自增指令：iinc；</span><br><span class="line"></span><br><span class="line">比较指令：dcmpg、dcmpl、fcmpg、fcmpl、lcmp；</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="4-类型转换指令"><a href="#4-类型转换指令" class="headerlink" title="4)	类型转换指令"></a><span id="4.4">4)	类型转换指令</span></h3><p>类型转换指令用来将两种不同类型进行转换，这些转换操作一般用于实现代码中的显示类型转换操作，或者前面提到的字节码指令集中数据类型相关指令无法与数据类型一一对应的问题。</p>
<p>虚拟机直接支持宽化类型转换，即小范围类型向大范围类型的安全转换，不需要显示的转换指令。</p>
<p>但是处理窄化类型转换时，必须显示使用转换指令来完成，这些指令包括：i2b、i2c、i2s、l2i、f2l、d2i、d2l和d2f。这些指令可能会导致数值的精度丢失。</p>
<h3 id="5-对象创建与访问指令"><a href="#5-对象创建与访问指令" class="headerlink" title="5)	对象创建与访问指令"></a><span id="4.5">5)	对象创建与访问指令</span></h3><p>虽然类实例和数组都是对象，但是虚拟机创建类对象和数组的指令是不同的。对象创建后，就可以通过对象访问指令获取对象实例或者数组实例中的字段或数组元素，指令如下：</p>
<p>创建类实例的指令：new；</p>
<p>创建数组的指令：newarray、anewarray、multianewarray；</p>
<p>访问类字段和实例字段的指令：getfield、putfield、getstatic、putstatic；</p>
<p>把一个数组元素加载到操作数栈的指令：baload、caload、saload、iaload、laload、faload、daload、aaload；</p>
<p>将一个操作数栈的值存储到数组元素中的指令：bastore、castore、sastore、iastore、fastore、dastore、aastore；</p>
<p>取数组长度的指令：arraylength；</p>
<p>检查类实例类型的指令：instanceof、checkcast；</p>
<h3 id="6-操作数栈管理指令"><a href="#6-操作数栈管理指令" class="headerlink" title="6)	操作数栈管理指令"></a><span id="4.6">6)	操作数栈管理指令</span></h3><p>就像操作一个普通的栈一样，Java虚拟机提供了一些用于直接操作操作数栈的指令，包括：</p>
<p>将操作数栈的栈顶一个或两个元素出栈：pop、pop2；</p>
<p>复制栈顶一个或两个数值并将复制值或双份的复制值重新压入栈顶：dup、dup2、dup_x1、dup2_x1、dup_x2、dup2_x2；</p>
<p>将栈顶最顶端的两个数值互换：swap；</p>
<h3 id="7-控制转移指令"><a href="#7-控制转移指令" class="headerlink" title="7)	控制转移指令"></a><span id="4.7">7)	控制转移指令</span></h3><p>控制转移指令可以让Java虚拟机有条件或无条件的从指定的位置指令而不是控制转移指令的下一条指令继续执行，可以理解为控制转移指令改变了PC寄存器的值。指令如下：</p>
<p>条件分支：ifeq、iflt、ifle、ifgt、ifge、ifnonnull、if_icmpeq、if_icmpne、if_icmplt、if_icmpgt、、if_icmpge、if_acmpeq和if_acmpne；</p>
<p>复合条件分支：tableswitch、lookupswitch；</p>
<p>无条件分支：goto、goto_w、jsr、jsr_w、ret；</p>
<h3 id="8-方法调用和返回指令"><a href="#8-方法调用和返回指令" class="headerlink" title="8)	方法调用和返回指令"></a><span id="1">8)	方法调用和返回指令</span></h3><p>这里仅仅列出5条用于方法调用的指令：</p>
<p>invokevirtual指令用于调用对象的实例方法，根据对象的实际类型进行分派（虚方法分派），这也是Java语言中最常见的方法分派方式；</p>
<p>invokeinterface指令用于调用接口方法，它会在运行时搜索一个实现了这个接口方法的对象，找出适合的方法进行调用；</p>
<p>invokespecial指令用于调用一些需要特殊处理的实例方法，包括实例初始化方法、私有方法和父类方法；</p>
<p>invokestatic指令用于调用类方法（static方法）；</p>
<p>invokedynamic指令用于在运行时动态解析出调用点限定符索引用的方法，并执行方法，前面4条指令的分派逻辑都固化在Java虚拟机内部，而invokedynamic指令的分派逻辑是由用户所设定的引导方法决定的；</p>
<p>方法调用指令与类型无关，但是方法返回指令是根据返回值的类型区分的，包括ireturn、lreturn、freturn、dreturn和areturn，另外还有一个return指令供声明为void的方法、实例初始化方法以及类和接口的类初始化方法使用。</p>
<h3 id="9-异常处理指令"><a href="#9-异常处理指令" class="headerlink" title="9)	异常处理指令"></a><span id="1">9)	异常处理指令</span></h3><p>在Java程序中显式抛出异常的操作（throw语句）都是由athrow指令来实现的，除了用throw语句显式抛出异常外，Java虚拟机规范还规定了许多运行时异常会在其他Java虚拟机指令检测到异常状况时自动抛出。</p>
<p>而在Java虚拟机中，处理异常（catch语句）不是由字节码指令来完成的，而是采用异常表来完成的。</p>
<h3 id="10-同步指令"><a href="#10-同步指令" class="headerlink" title="10)	同步指令"></a><span id="1">10)	同步指令</span></h3><p>Java虚拟机可以支持方法级的同步和方法内部一段指令序列的同步，这两种同步结构都是使用管程（Monitor）来支持的。</p>
<p>方法级的同步是隐式的，即不需要通过字节码指令来控制，它实现在方法调用和返回操作中。虚拟机可以从方法常量池的方法表结构中的ACC_SYNCHRONIZED访问标志得知一个方法是否声明为同步方法。当方法调用时，调用指令就会去检查方法的ACC_SYNCHRONIZED访问标志是否被设置了，如果设置，执行线程就要求持有管程。在方法执行期间，执行线程持有了管程，其他任何线程都无法再获取到同一个管程。如果一个方法在执行期间发生了异常，并在方法中无法处理此异常，那么这个同步方法所持有的管程将在异常抛出后自动释放。</p>
<p>同步一段指令集序列通常是由Java语言中的synchronized语句块表示的，Java虚拟机的指令集中有monitorenter和monitorexit指令来支持synchronized关键字的语义。正确实现synchronized关键字需要Javac编译器和Java虚拟机两者共同协作。编译器必须保证每个monitorenter指令都有对应的monitorexit指令。</p>
<h2 id="5-再看几个栗子"><a href="#5-再看几个栗子" class="headerlink" title="5. 再看几个栗子"></a><span id="5">5. 再看几个栗子</span></h2><h3 id="例1"><a href="#例1" class="headerlink" title="例1"></a><span id="5.1">例1</span></h3><p>Java源代码如下：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public <span class="keyword">class</span> <span class="title class_">TestDemo</span> &#123;</span><br><span class="line">    public static int minus(int x)&#123;</span><br><span class="line">        <span class="keyword">return</span> -x;</span><br><span class="line">    &#125;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        int x = <span class="number">5</span>;</span><br><span class="line">        int y = minus(x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Javap–verbose TestDemo之后，得到Java字节码：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Classfile /<span class="symbol">C:</span>/Users/yalechen/Desktop/<span class="variable constant_">JVM</span>/Java Byte Code/samples/TestDemo/TestDemo.<span class="keyword">class</span></span><br><span class="line">  <span class="title class_">Last</span> modified <span class="number">2016</span>-<span class="number">8</span>-<span class="number">16</span>; size <span class="number">342</span> bytes</span><br><span class="line">  <span class="variable constant_">MD5</span> checksum 77ff8854473da6d63caf8a5347bb3434</span><br><span class="line">  Compiled from <span class="string">&quot;TestDemo.java&quot;</span></span><br><span class="line">public <span class="keyword">class</span> <span class="title class_">TestDemo</span></span><br><span class="line">  minor <span class="symbol">version:</span> <span class="number">0</span></span><br><span class="line">  major <span class="symbol">version:</span> <span class="number">52</span></span><br><span class="line">  <span class="symbol">flags:</span> <span class="variable constant_">ACC_PUBLIC</span>, <span class="variable constant_">ACC_SUPER</span></span><br><span class="line">Constant <span class="symbol">pool:</span></span><br><span class="line">   <span class="comment">#1 = Methodref          #4.#15         // java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">   <span class="comment">#2 = Methodref          #3.#16         // TestDemo.minus:(I)I</span></span><br><span class="line">   <span class="comment">#3 = Class              #17            // TestDemo</span></span><br><span class="line">   <span class="comment">#4 = Class              #18            // java/lang/Object</span></span><br><span class="line">   <span class="comment">#5 = Utf8               &lt;init&gt;</span></span><br><span class="line">   <span class="comment">#6 = Utf8               ()V</span></span><br><span class="line">   <span class="comment">#7 = Utf8               Code</span></span><br><span class="line">   <span class="comment">#8 = Utf8               LineNumberTable</span></span><br><span class="line">   <span class="comment">#9 = Utf8               minus</span></span><br><span class="line">  <span class="comment">#10 = Utf8               (I)I</span></span><br><span class="line">  <span class="comment">#11 = Utf8               main</span></span><br><span class="line">  <span class="comment">#12 = Utf8               ([Ljava/lang/String;)V</span></span><br><span class="line">  <span class="comment">#13 = Utf8               SourceFile</span></span><br><span class="line">  <span class="comment">#14 = Utf8               TestDemo.java</span></span><br><span class="line">  <span class="comment">#15 = NameAndType        #5:#6          // &quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">  <span class="comment">#16 = NameAndType        #9:#10         // minus:(I)I</span></span><br><span class="line">  <span class="comment">#17 = Utf8               TestDemo</span></span><br><span class="line">  <span class="comment">#18 = Utf8               java/lang/Object</span></span><br><span class="line">&#123;</span><br><span class="line">  public TestDemo();</span><br><span class="line">    <span class="symbol">descriptor:</span> ()V</span><br><span class="line">    <span class="symbol">flags:</span> <span class="variable constant_">ACC_PUBLIC</span></span><br><span class="line">    <span class="symbol">Code:</span></span><br><span class="line">      stack=<span class="number">1</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         <span class="number">1</span>: invokespecial <span class="comment">#1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V	V表示Void，()表示无参数，冒号之前表示的是方法名</span></span><br><span class="line">         <span class="number">4</span>: <span class="keyword">return</span></span><br><span class="line">      <span class="symbol">LineNumberTable:</span></span><br><span class="line">        line <span class="number">3</span>: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  public static int minus(int);</span><br><span class="line">    <span class="symbol">descriptor:</span> (I)I					/<span class="regexp">/描述符描述的参数列表和返回类型.I表示int</span></span><br><span class="line"><span class="regexp">    flags: ACC_PUBLIC, ACC_STATIC			/</span><span class="regexp">/访问权限</span></span><br><span class="line"><span class="regexp">    Code:</span></span><br><span class="line"><span class="regexp">      stack=1, locals=1, args_size=1</span></span><br><span class="line"><span class="regexp">         0: iload_0					/</span><span class="regexp">/将slot0压入栈顶，也就是传入的参数</span></span><br><span class="line"><span class="regexp">         1: ineg					/</span><span class="regexp">/将栈顶的值弹出取负后压回栈顶</span></span><br><span class="line"><span class="regexp">         2: ireturn</span></span><br><span class="line"><span class="regexp">      LineNumberTable:</span></span><br><span class="line"><span class="regexp">        line 5: 0</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  public static void main(java.lang.String[]);</span></span><br><span class="line"><span class="regexp">    descriptor: ([Ljava/lang</span><span class="regexp">/String;)V</span></span><br><span class="line"><span class="regexp">    flags: ACC_PUBLIC, ACC_STATIC</span></span><br><span class="line"><span class="regexp">    Code:						/</span><span class="regexp">/确定可以访问后进入Code属性表执行命令</span></span><br><span class="line"><span class="regexp">      stack=1, locals=3, args_size=1			/</span><span class="regexp">/读入栈深度建立符合要求的操作数栈，读入局部变量大小建立符合要求的局部变量表，根据参数个数向局部变量表中依序加入参数（第一个参数是引用当前对象的this，所以空参数列表的参数数也是1）</span></span><br><span class="line"><span class="regexp">         0: iconst_5					/</span><span class="regexp">/前面 0 表示标识。将整数5压入栈顶</span></span><br><span class="line"><span class="regexp">         1: istore_1					/</span><span class="regexp">/将栈顶整数值存入局部变量表的slot1（slot0是参数this）到这为止，int x = 5;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">         2: iload_1					/</span><span class="regexp">/将slot1压入栈顶</span></span><br><span class="line"><span class="regexp">         3: invokestatic  #2                  /</span><span class="regexp">/ Method minus:(I)I		调用静态累方法minus。二进制invokestatic方法用于调用静态方法，参数是根据常量池中已经转换为直接引用的常量，意即minus函数在方法区中的地址，找到这个地址调用函数，向其中加入的参数是栈顶的值</span></span><br><span class="line"><span class="regexp">         6: istore_2					/</span><span class="regexp">/此时的栈顶元素是经过了 minus 方法处理过了的</span></span><br><span class="line"><span class="regexp">         7: return</span></span><br><span class="line"><span class="regexp">      LineNumberTable:</span></span><br><span class="line"><span class="regexp">        line 8: 0</span></span><br><span class="line"><span class="regexp">        line 9: 2</span></span><br><span class="line"><span class="regexp">        line 10: 7</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">SourceFile: &quot;TestDemo.java&quot;</span></span><br><span class="line"><span class="regexp"></span></span><br></pre></td></tr></table></figure>

<h3 id="例2"><a href="#例2" class="headerlink" title="例2"></a><span id="5.2">例2</span></h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/<span class="regexp">/测试重载机制</span></span><br><span class="line"><span class="regexp">public class TestDemo1 &#123;</span></span><br><span class="line"><span class="regexp">    static class Human&#123;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">    static class Man extends Human&#123;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">    static class Woman extends Human&#123;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">    public void sayHello(Human human) &#123;</span></span><br><span class="line"><span class="regexp">        System.out.println(&quot;hello human&quot;);</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">    public void sayHello(Man man) &#123;</span></span><br><span class="line"><span class="regexp">        System.out.println(&quot;hello man&quot;);</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">    public void sayHello(Woman woman) &#123;</span></span><br><span class="line"><span class="regexp">        System.out.println(&quot;hello woman&quot;);</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">    public static void main(String[] args) &#123;</span></span><br><span class="line"><span class="regexp">        TestDemo1 demo = new TestDemo1();</span></span><br><span class="line"><span class="regexp">        Human man = new Man();</span></span><br><span class="line"><span class="regexp">        Human woman = new Woman();</span></span><br><span class="line"><span class="regexp">        demo.sayHello(man);</span></span><br><span class="line"><span class="regexp">        demo.sayHello(woman);</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br></pre></td></tr></table></figure>

<p>Java字节码：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Classfile /<span class="symbol">C:</span>/Users/yalechen/Desktop/<span class="variable constant_">JVM</span>/Java Byte Code/samples/TestDemo/TestDemo1.<span class="keyword">class</span></span><br><span class="line">  <span class="title class_">Last</span> modified <span class="number">2016</span>-<span class="number">8</span>-<span class="number">16</span>; size <span class="number">883</span> bytes</span><br><span class="line">  <span class="variable constant_">MD5</span> checksum 5a1df45f23bd666f3c6c716e50265345</span><br><span class="line">  Compiled from <span class="string">&quot;TestDemo1.java&quot;</span></span><br><span class="line"></span><br><span class="line">public <span class="keyword">class</span> <span class="title class_">TestDemo1</span>					/<span class="regexp">/重载</span></span><br><span class="line"><span class="regexp">  minor version: 0</span></span><br><span class="line"><span class="regexp">  major version: 52</span></span><br><span class="line"><span class="regexp">  flags: ACC_PUBLIC, ACC_SUPER</span></span><br><span class="line"><span class="regexp">Constant pool:</span></span><br><span class="line"><span class="regexp">   #1 = Methodref          #14.#32        /</span><span class="regexp">/ java/lang</span><span class="regexp">/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line"><span class="regexp">   #2 = Fieldref           #33.#34        /</span><span class="regexp">/ java/lang</span><span class="regexp">/System.out:Ljava/io</span><span class="regexp">/PrintStream;</span></span><br><span class="line"><span class="regexp">   #3 = String             #35            /</span><span class="regexp">/ hello human</span></span><br><span class="line"><span class="regexp">   #4 = Methodref          #36.#37        /</span><span class="regexp">/ java/io</span><span class="regexp">/PrintStream.println:(Ljava/lang</span><span class="regexp">/String;)V</span></span><br><span class="line"><span class="regexp">   #5 = String             #38            /</span><span class="regexp">/ hello man</span></span><br><span class="line"><span class="regexp">   #6 = String             #39            /</span><span class="regexp">/ hello woman</span></span><br><span class="line"><span class="regexp">   #7 = Class              #40            /</span><span class="regexp">/ TestDemo1</span></span><br><span class="line"><span class="regexp">   #8 = Methodref          #7.#32         /</span><span class="regexp">/ TestDemo1.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line"><span class="regexp">   #9 = Class              #41            /</span><span class="regexp">/ TestDemo1$Man</span></span><br><span class="line"><span class="regexp">  #10 = Methodref          #9.#32         /</span><span class="regexp">/ TestDemo1$Man.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line"><span class="regexp">  #11 = Class              #42            /</span><span class="regexp">/ TestDemo1$Woman</span></span><br><span class="line"><span class="regexp">  #12 = Methodref          #11.#32        /</span><span class="regexp">/ TestDemo1$Woman.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line"><span class="regexp">  #13 = Methodref          #7.#43         /</span><span class="regexp">/ TestDemo1.sayHello:(LTestDemo1$Human;)V</span></span><br><span class="line"><span class="regexp">  #14 = Class              #44            /</span><span class="regexp">/ java/lang</span><span class="regexp">/Object</span></span><br><span class="line"><span class="regexp">  #15 = Utf8               Woman</span></span><br><span class="line"><span class="regexp">  #16 = Utf8               InnerClasses</span></span><br><span class="line"><span class="regexp">  #17 = Utf8               Man</span></span><br><span class="line"><span class="regexp">  #18 = Class              #45            /</span><span class="regexp">/ TestDemo1$Human</span></span><br><span class="line"><span class="regexp">  #19 = Utf8               Human</span></span><br><span class="line"><span class="regexp">  #20 = Utf8               &lt;init&gt;</span></span><br><span class="line"><span class="regexp">  #21 = Utf8               ()V</span></span><br><span class="line"><span class="regexp">  #22 = Utf8               Code</span></span><br><span class="line"><span class="regexp">  #23 = Utf8               LineNumberTable</span></span><br><span class="line"><span class="regexp">  #24 = Utf8               sayHello</span></span><br><span class="line"><span class="regexp">  #25 = Utf8               (LTestDemo1$Human;)V</span></span><br><span class="line"><span class="regexp">  #26 = Utf8               (LTestDemo1$Man;)V</span></span><br><span class="line"><span class="regexp">  #27 = Utf8               (LTestDemo1$Woman;)V</span></span><br><span class="line"><span class="regexp">  #28 = Utf8               main</span></span><br><span class="line"><span class="regexp">  #29 = Utf8               ([Ljava/lang</span><span class="regexp">/String;)V</span></span><br><span class="line"><span class="regexp">  #30 = Utf8               SourceFile</span></span><br><span class="line"><span class="regexp">  #31 = Utf8               TestDemo1.java</span></span><br><span class="line"><span class="regexp">  #32 = NameAndType        #20:#21        /</span><span class="regexp">/ &quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line"><span class="regexp">  #33 = Class              #46            /</span><span class="regexp">/ java/lang</span><span class="regexp">/System</span></span><br><span class="line"><span class="regexp">  #34 = NameAndType        #47:#48        /</span><span class="regexp">/ out:Ljava/io</span><span class="regexp">/PrintStream;</span></span><br><span class="line"><span class="regexp">  #35 = Utf8               hello human</span></span><br><span class="line"><span class="regexp">  #36 = Class              #49            /</span><span class="regexp">/ java/io</span><span class="regexp">/PrintStream</span></span><br><span class="line"><span class="regexp">  #37 = NameAndType        #50:#51        /</span><span class="regexp">/ println:(Ljava/lang</span><span class="regexp">/String;)V</span></span><br><span class="line"><span class="regexp">  #38 = Utf8               hello man</span></span><br><span class="line"><span class="regexp">  #39 = Utf8               hello woman</span></span><br><span class="line"><span class="regexp">  #40 = Utf8               TestDemo1</span></span><br><span class="line"><span class="regexp">  #41 = Utf8               TestDemo1$Man</span></span><br><span class="line"><span class="regexp">  #42 = Utf8               TestDemo1$Woman</span></span><br><span class="line"><span class="regexp">  #43 = NameAndType        #24:#25        /</span><span class="regexp">/ sayHello:(LTestDemo1$Human;)V</span></span><br><span class="line"><span class="regexp">  #44 = Utf8               java/lang</span><span class="regexp">/Object</span></span><br><span class="line"><span class="regexp">  #45 = Utf8               TestDemo1$Human</span></span><br><span class="line"><span class="regexp">  #46 = Utf8               java/lang</span><span class="regexp">/System</span></span><br><span class="line"><span class="regexp">  #47 = Utf8               out</span></span><br><span class="line"><span class="regexp">  #48 = Utf8               Ljava/io</span><span class="regexp">/PrintStream;</span></span><br><span class="line"><span class="regexp">  #49 = Utf8               java/io</span><span class="regexp">/PrintStream</span></span><br><span class="line"><span class="regexp">  #50 = Utf8               println</span></span><br><span class="line"><span class="regexp">  #51 = Utf8               (Ljava/lang</span><span class="regexp">/String;)V</span></span><br><span class="line"><span class="regexp">&#123;</span></span><br><span class="line"><span class="regexp">  public TestDemo1();				/</span><span class="regexp">/构造方法</span></span><br><span class="line"><span class="regexp">    descriptor: ()V</span></span><br><span class="line"><span class="regexp">    flags: ACC_PUBLIC</span></span><br><span class="line"><span class="regexp">    Code:</span></span><br><span class="line"><span class="regexp">      stack=1, locals=1, args_size=1</span></span><br><span class="line"><span class="regexp">         0: aload_0</span></span><br><span class="line"><span class="regexp">         1: invokespecial #1                  /</span><span class="regexp">/ Method java/lang</span><span class="regexp">/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line"><span class="regexp">         4: return</span></span><br><span class="line"><span class="regexp">      LineNumberTable:</span></span><br><span class="line"><span class="regexp">        line 1: 0</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  public void sayHello(TestDemo1$Human);</span></span><br><span class="line"><span class="regexp">    descriptor: (LTestDemo1$Human;)V</span></span><br><span class="line"><span class="regexp">    flags: ACC_PUBLIC</span></span><br><span class="line"><span class="regexp">    Code:</span></span><br><span class="line"><span class="regexp">      stack=2, locals=2, args_size=2</span></span><br><span class="line"><span class="regexp">         0: getstatic     #2                  /</span><span class="regexp">/ Field java/lang</span><span class="regexp">/System.out:Ljava/io</span><span class="regexp">/PrintStream;</span></span><br><span class="line"><span class="regexp">         3: ldc           #3                  /</span><span class="regexp">/ String hello human</span></span><br><span class="line"><span class="regexp">         5: invokevirtual #4                  /</span><span class="regexp">/ Method java/io</span><span class="regexp">/PrintStream.println:(Ljava/lang</span><span class="regexp">/String;)V</span></span><br><span class="line"><span class="regexp">         8: return</span></span><br><span class="line"><span class="regexp">      LineNumberTable:</span></span><br><span class="line"><span class="regexp">        line 11: 0</span></span><br><span class="line"><span class="regexp">        line 12: 8</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  public void sayHello(TestDemo1$Man);</span></span><br><span class="line"><span class="regexp">    descriptor: (LTestDemo1$Man;)V</span></span><br><span class="line"><span class="regexp">    flags: ACC_PUBLIC</span></span><br><span class="line"><span class="regexp">    Code:</span></span><br><span class="line"><span class="regexp">      stack=2, locals=2, args_size=2</span></span><br><span class="line"><span class="regexp">         0: getstatic     #2                  /</span><span class="regexp">/ Field java/lang</span><span class="regexp">/System.out:Ljava/io</span><span class="regexp">/PrintStream;</span></span><br><span class="line"><span class="regexp">         3: ldc           #5                  /</span><span class="regexp">/ String hello man</span></span><br><span class="line"><span class="regexp">         5: invokevirtual #4                  /</span><span class="regexp">/ Method java/io</span><span class="regexp">/PrintStream.println:(Ljava/lang</span><span class="regexp">/String;)V</span></span><br><span class="line"><span class="regexp">         8: return</span></span><br><span class="line"><span class="regexp">      LineNumberTable:</span></span><br><span class="line"><span class="regexp">        line 14: 0</span></span><br><span class="line"><span class="regexp">        line 15: 8</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  public void sayHello(TestDemo1$Woman);</span></span><br><span class="line"><span class="regexp">    descriptor: (LTestDemo1$Woman;)V</span></span><br><span class="line"><span class="regexp">    flags: ACC_PUBLIC</span></span><br><span class="line"><span class="regexp">    Code:</span></span><br><span class="line"><span class="regexp">      stack=2, locals=2, args_size=2</span></span><br><span class="line"><span class="regexp">         0: getstatic     #2                  /</span><span class="regexp">/ Field java/lang</span><span class="regexp">/System.out:Ljava/io</span><span class="regexp">/PrintStream;</span></span><br><span class="line"><span class="regexp">         3: ldc           #6                  /</span><span class="regexp">/ String hello woman</span></span><br><span class="line"><span class="regexp">         5: invokevirtual #4                  /</span><span class="regexp">/ Method java/io</span><span class="regexp">/PrintStream.println:(Ljava/lang</span><span class="regexp">/String;)V</span></span><br><span class="line"><span class="regexp">         8: return</span></span><br><span class="line"><span class="regexp">      LineNumberTable:</span></span><br><span class="line"><span class="regexp">        line 17: 0</span></span><br><span class="line"><span class="regexp">        line 18: 8</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  public static void main(java.lang.String[]);</span></span><br><span class="line"><span class="regexp">    descriptor: ([Ljava/lang</span><span class="regexp">/String;)V</span></span><br><span class="line"><span class="regexp">    flags: ACC_PUBLIC, ACC_STATIC</span></span><br><span class="line"><span class="regexp">    Code:</span></span><br><span class="line"><span class="regexp">      stack=2, locals=4, args_size=1</span></span><br><span class="line"><span class="regexp">         0: new           #7                  /</span><span class="regexp">/ class TestDemo1</span></span><br><span class="line"><span class="regexp">         3: dup</span></span><br><span class="line"><span class="regexp">         4: invokespecial #8                  /</span><span class="regexp">/ Method &quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line"><span class="regexp">         7: astore_1</span></span><br><span class="line"><span class="regexp">         8: new           #9                  /</span><span class="regexp">/ class TestDemo1$Man</span></span><br><span class="line"><span class="regexp">        11: dup</span></span><br><span class="line"><span class="regexp">        12: invokespecial #10                 /</span><span class="regexp">/ Method TestDemo1$Man.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line"><span class="regexp">        15: astore_2</span></span><br><span class="line"><span class="regexp">        16: new           #11                 /</span><span class="regexp">/ class TestDemo1$Woman</span></span><br><span class="line"><span class="regexp">        19: dup</span></span><br><span class="line"><span class="regexp">        20: invokespecial #12                 /</span><span class="regexp">/ Method TestDemo1$Woman.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line"><span class="regexp">        23: astore_3</span></span><br><span class="line"><span class="regexp">        24: aload_1</span></span><br><span class="line"><span class="regexp">        25: aload_2</span></span><br><span class="line"><span class="regexp">        26: invokevirtual #13                 /</span><span class="regexp">/ Method sayHello:(LTestDemo1$Human;)V</span></span><br><span class="line"><span class="regexp">        29: aload_1</span></span><br><span class="line"><span class="regexp">        30: aload_3</span></span><br><span class="line"><span class="regexp">        31: invokevirtual #13                 /</span><span class="regexp">/ Method sayHello:(LTestDemo1$Human;)V</span></span><br><span class="line"><span class="regexp">        34: return</span></span><br><span class="line"><span class="regexp">      LineNumberTable:				/</span><span class="regexp">/与源代码中的各行代码进行相互匹配</span></span><br><span class="line"><span class="regexp">        line 20: 0</span></span><br><span class="line"><span class="regexp">        line 21: 8</span></span><br><span class="line"><span class="regexp">        line 22: 16</span></span><br><span class="line"><span class="regexp">        line 23: 24</span></span><br><span class="line"><span class="regexp">        line 24: 29</span></span><br><span class="line"><span class="regexp">        line 25: 34</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">SourceFile: &quot;TestDemo1.java&quot;</span></span><br><span class="line"><span class="regexp">InnerClasses:</span></span><br><span class="line"><span class="regexp">     static #15= #11 of #7; /</span><span class="regexp">/Woman=class TestDemo1$Woman of class TestDemo1</span></span><br><span class="line"><span class="regexp">     static #17= #9 of #7; /</span><span class="regexp">/Man=class TestDemo1$Man of class TestDemo1</span></span><br><span class="line"><span class="regexp">     static #19= #18 of #7; /</span><span class="regexp">/Human=class TestDemo1$Human of class TestDemo1</span></span><br><span class="line"><span class="regexp"></span></span><br></pre></td></tr></table></figure>

<h3 id="例3"><a href="#例3" class="headerlink" title="例3"></a><span id="5.3">例3</span></h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/*重写*<span class="regexp">/</span></span><br><span class="line"><span class="regexp">public class TestDemo2 &#123;</span></span><br><span class="line"><span class="regexp">    static class Human&#123;</span></span><br><span class="line"><span class="regexp">        public void sayHello() &#123;</span></span><br><span class="line"><span class="regexp">            System.out.println(&quot;hello human&quot;);</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">    static class Man extends Human&#123;</span></span><br><span class="line"><span class="regexp">        public void sayHello() &#123;</span></span><br><span class="line"><span class="regexp">            System.out.println(&quot;hello man&quot;);</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">    static class Woman extends Human&#123;</span></span><br><span class="line"><span class="regexp">        public void sayHello() &#123;</span></span><br><span class="line"><span class="regexp">            System.out.println(&quot;hello woman&quot;);</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    public static void main(String[] args) &#123;</span></span><br><span class="line"><span class="regexp">        Human man = new Man();</span></span><br><span class="line"><span class="regexp">        Human woman = new Woman();</span></span><br><span class="line"><span class="regexp">        man.sayHello();</span></span><br><span class="line"><span class="regexp">        woman.sayHello();</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br></pre></td></tr></table></figure>

<p>Java字节码：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Classfile /<span class="symbol">C:</span>/Users/yalechen/Desktop/<span class="variable constant_">JVM</span>/Java Byte Code/samples/TestDemo/TestDemo2.<span class="keyword">class</span></span><br><span class="line">  <span class="title class_">Last</span> modified <span class="number">2016</span>-<span class="number">8</span>-<span class="number">16</span>; size <span class="number">464</span> bytes</span><br><span class="line">  <span class="variable constant_">MD5</span> checksum 2183e6c960f34e773da47dac5f8d717a</span><br><span class="line">  Compiled from <span class="string">&quot;TestDemo2.java&quot;</span></span><br><span class="line">public <span class="keyword">class</span> <span class="title class_">TestDemo2</span></span><br><span class="line">  minor <span class="symbol">version:</span> <span class="number">0</span></span><br><span class="line">  major <span class="symbol">version:</span> <span class="number">52</span></span><br><span class="line">  <span class="symbol">flags:</span> <span class="variable constant_">ACC_PUBLIC</span>, <span class="variable constant_">ACC_SUPER</span></span><br><span class="line">Constant <span class="symbol">pool:</span></span><br><span class="line">   <span class="comment">#1 = Methodref          #8.#22         // java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">   <span class="comment">#2 = Class              #23            // TestDemo2$Man</span></span><br><span class="line">   <span class="comment">#3 = Methodref          #2.#22         // TestDemo2$Man.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">   <span class="comment">#4 = Class              #24            // TestDemo2$Woman</span></span><br><span class="line">   <span class="comment">#5 = Methodref          #4.#22         // TestDemo2$Woman.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">   <span class="comment">#6 = Methodref          #12.#25        // TestDemo2$Human.sayHello:()V</span></span><br><span class="line">   <span class="comment">#7 = Class              #26            // TestDemo2</span></span><br><span class="line">   <span class="comment">#8 = Class              #27            // java/lang/Object</span></span><br><span class="line">   <span class="comment">#9 = Utf8               Woman</span></span><br><span class="line">  <span class="comment">#10 = Utf8               InnerClasses</span></span><br><span class="line">  <span class="comment">#11 = Utf8               Man</span></span><br><span class="line">  <span class="comment">#12 = Class              #28            // TestDemo2$Human</span></span><br><span class="line">  <span class="comment">#13 = Utf8               Human</span></span><br><span class="line">  <span class="comment">#14 = Utf8               &lt;init&gt;</span></span><br><span class="line">  <span class="comment">#15 = Utf8               ()V</span></span><br><span class="line">  <span class="comment">#16 = Utf8               Code</span></span><br><span class="line">  <span class="comment">#17 = Utf8               LineNumberTable</span></span><br><span class="line">  <span class="comment">#18 = Utf8               main</span></span><br><span class="line">  <span class="comment">#19 = Utf8               ([Ljava/lang/String;)V</span></span><br><span class="line">  <span class="comment">#20 = Utf8               SourceFile</span></span><br><span class="line">  <span class="comment">#21 = Utf8               TestDemo2.java</span></span><br><span class="line">  <span class="comment">#22 = NameAndType        #14:#15        // &quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">  <span class="comment">#23 = Utf8               TestDemo2$Man</span></span><br><span class="line">  <span class="comment">#24 = Utf8               TestDemo2$Woman</span></span><br><span class="line">  <span class="comment">#25 = NameAndType        #29:#15        // sayHello:()V</span></span><br><span class="line">  <span class="comment">#26 = Utf8               TestDemo2</span></span><br><span class="line">  <span class="comment">#27 = Utf8               java/lang/Object</span></span><br><span class="line">  <span class="comment">#28 = Utf8               TestDemo2$Human</span></span><br><span class="line">  <span class="comment">#29 = Utf8               sayHello</span></span><br><span class="line">&#123;</span><br><span class="line">  public TestDemo2();</span><br><span class="line">    <span class="symbol">descriptor:</span> ()V</span><br><span class="line">    <span class="symbol">flags:</span> <span class="variable constant_">ACC_PUBLIC</span></span><br><span class="line">    <span class="symbol">Code:</span></span><br><span class="line">      stack=<span class="number">1</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         <span class="number">1</span>: invokespecial <span class="comment">#1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">         <span class="number">4</span>: <span class="keyword">return</span></span><br><span class="line">      <span class="symbol">LineNumberTable:</span></span><br><span class="line">        line <span class="number">3</span>: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  public static void main(java.lang.String[]);</span><br><span class="line">    <span class="symbol">descriptor:</span> ([Ljava/lang/String;)V</span><br><span class="line">    <span class="symbol">flags:</span> <span class="variable constant_">ACC_PUBLIC</span>, <span class="variable constant_">ACC_STATIC</span></span><br><span class="line">    <span class="symbol">Code:</span></span><br><span class="line">      stack=<span class="number">2</span>, locals=<span class="number">3</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: new           <span class="comment">#2                  // class TestDemo2$Man</span></span><br><span class="line">         <span class="number">3</span>: dup</span><br><span class="line">         <span class="number">4</span>: invokespecial <span class="comment">#3                  // Method TestDemo2$Man.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">         <span class="number">7</span>: astore_1</span><br><span class="line">         <span class="number">8</span>: new           <span class="comment">#4                  // class TestDemo2$Woman</span></span><br><span class="line">        <span class="number">11</span>: dup</span><br><span class="line">        <span class="number">12</span>: invokespecial <span class="comment">#5                  // Method TestDemo2$Woman.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">        <span class="number">15</span>: astore_2</span><br><span class="line">        <span class="number">16</span>: aload_1</span><br><span class="line">        <span class="number">17</span>: invokevirtual <span class="comment">#6                  // Method TestDemo2$Human.sayHello:()V</span></span><br><span class="line">        <span class="number">20</span>: aload_2</span><br><span class="line">        <span class="number">21</span>: invokevirtual <span class="comment">#6                  // Method TestDemo2$Human.sayHello:()V</span></span><br><span class="line">        <span class="number">24</span>: <span class="keyword">return</span></span><br><span class="line">      <span class="symbol">LineNumberTable:</span></span><br><span class="line">        line <span class="number">21</span>: <span class="number">0</span></span><br><span class="line">        line <span class="number">22</span>: <span class="number">8</span></span><br><span class="line">        line <span class="number">23</span>: <span class="number">16</span></span><br><span class="line">        line <span class="number">24</span>: <span class="number">20</span></span><br><span class="line">        line <span class="number">25</span>: <span class="number">24</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="symbol">SourceFile:</span> <span class="string">&quot;TestDemo2.java&quot;</span></span><br><span class="line"><span class="symbol">InnerClasses:</span></span><br><span class="line">     static <span class="comment">#9= #4 of #7; //Woman=class TestDemo2$Woman of class TestDemo2</span></span><br><span class="line">     static <span class="comment">#11= #2 of #7; //Man=class TestDemo2$Man of class TestDemo2</span></span><br><span class="line">     static <span class="comment">#13= #12 of #7; //Human=class TestDemo2$Human of class TestDemo2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>可以从例2和例3看出，无论是重载还是重写，都是二进制指令invokevirtual调用了sayHello方法来执行的。</p>
<p>在重载中，程序调用的是参数实际类型不同的方法，但是虚拟机最终分派了相同外观类型（静态类型）的方法，这说明在重载的过程中虚拟机在运行的时候是只看参数的外观类型（静态类型）的，而这个外观类型（静态类型）是在编译的时候就已经确定的，和虚拟机没有关系。这种依赖静态类型来做方法的分配叫做静态分派。</p>
<p>在重写中，程序调用的是不同实际类型的同名方法，虚拟机依据对象的实际类型去寻找是否有这个方法，如果有就执行，如果没有去父类里找，最终在实际类型里找到了这个方法，所以最终是在运行期动态分派了方法。在编译的时候我们可以看到字节码指示的方法都是一样的符号引用，但是运行期虚拟机能够根据实际类型去确定出真正需要的直接引用。这种依赖实际类型来做方法的分配叫做动态分派。得益于java虚拟机的动态分派会在分派前确定对象的实际类型，面向对象的多态性才能体现出来。</p>
<p> </p>
</div><div class="article-licensing box"><div class="licensing-title"><p>Java字节码总结</p><p><a href="http://example.com/2022/07/24/2016-08-22-Java-Byte-Code/">http://example.com/2022/07/24/2016-08-22-Java-Byte-Code/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>yalechen</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2022-07-24</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2022-07-24</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="notification is-danger">You need to set <code>install_url</code> to use ShareThis. Please set it in <code>_config.yml</code>.</div></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" href="/" target="_blank" rel="noopener" data-type="afdian"><span class="icon is-small"><i class="fas fa-charging-station"></i></span><span>爱发电</span></a><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/" alt="支付宝"></span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>送我杯咖啡</span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="patreon"><span class="icon is-small"><i class="fab fa-patreon"></i></span><span>Patreon</span></a><div class="notification is-danger">You forgot to set the <code>business</code> or <code>currency_code</code> for Paypal. Please set it in <code>_config.yml</code>.</div><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2022/07/24/2016-04-10-Java-key/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Java 关键字总结</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2022/07/24/2016-01-16-PageRank-R/"><span class="level-item">R语言实现PageRank</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="notification is-danger">You forgot to set the <code>shortname</code> for Disqus. Please set it in <code>_config.yml</code>.</div></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="cyw3"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">cyw3</p><p class="is-size-6 is-block">ProgramAnalysis/Compiler/VirtualMachine</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Shenzhen, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">30</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">1</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/cyw3" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/cyw3"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://tca.tencent.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Tencent Code Analysis</span></span><span class="level-right"><span class="level-item tag">tca.tencent.com</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-07-30T03:20:12.000Z">2022-07-30</time></p><p class="title"><a href="/2022/07/30/2022-7-30-Binaryen-Readme/">2022-7-30-Binaryen-Readme</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-07-24T06:56:22.285Z">2022-07-24</time></p><p class="title"><a href="/2022/07/24/2016-01-14-MACD/">MACD策略</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-07-24T06:55:45.905Z">2022-07-24</time></p><p class="title"><a href="/2022/07/24/2016-01-20-OpenCV-with-CodeBlocks/">OpenCV with CodeBlocks</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-07-24T06:55:26.913Z">2022-07-24</time></p><p class="title"><a href="/2022/07/24/2016-01-12-Welcome-to-yalesonchan-blog/">Welcome to yalechen&#039;s blog</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-07-24T05:39:54.677Z">2022-07-24</time></p><p class="title"><a href="/2022/07/24/2016-01-15-Genetic-Algorithms-in-R/">遗传算法的R语言实现</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2022/07/"><span class="level-start"><span class="level-item">七月 2022</span></span><span class="level-end"><span class="level-item tag">30</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/wasm/"><span class="tag">wasm</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Cyw3</a><p class="is-size-7"><span>&copy; 2022 yalechen</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/cyw3/cyw3.github.io"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>